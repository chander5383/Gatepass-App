<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GWTPL Gate Pass (v17)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="page-wrap" id="appRoot">
    <header class="topbar">
      <div class="logo-wrap"><img src="https://gwtpl.co/logo.png" id="mainLogo" alt="GWTPL"></div>
      <div class="title-wrap">
        <div class="company">GLOBUS WAREHOUSING & TRADING PVT. LTD.</div>
        <div class="location">ABOHAR</div>
        <div class="doc-title" id="docTitle">STOCK TRANSFER VOUCHER</div>
      </div>
      <div class="meta-wrap">
        <label>Gate Pass No</label>
        <input id="gpNo" placeholder="Auto / manual">
        <label>Date</label>
        <input id="gpDate" type="date">
        <label>Type</label>
        <select id="gpType">
          <option>Stock Transfer Voucher</option>
          <option>Stock Transfer Voucher Returnable</option>
        </select>
      </div>
    </header>

    <main class="content">
      <!-- Consignee / Issued By (above) -->
      <section class="card grid-3">
        <div>
          <label>Consignee Unit</label>
          <input id="consignee" value="GWPTL Abohar">
        </div>
        <div>
          <label>Person Carrying</label>
          <input id="person" placeholder="Name">
        </div>
        <div>
          <label>Authority Person</label>
          <input id="authority" value="Sh.">
        </div>
      </section>

      <!-- Items -->
      <section class="card">
        <div class="section-header">
          <h3>Item Details</h3>
          <div class="controls">
            <label><input type="checkbox" id="showTag" onchange="toggleCols()"> Tag No</label>
            <label><input type="checkbox" id="showSr" onchange="toggleCols()"> Sr No</label>
            <button class="btn" onclick="addRow()">+ Add Item</button>
            <button class="btn muted" onclick="clearItems()">Clear Items</button>
          </div>
        </div>

        <div class="table-wrap">
          <table id="itemTable">
            <thead>
              <tr>
                <th>Sr</th>
                <th>Item Description</th>
                <th class="col-tag">Tag No</th>
                <th class="col-sr">Sr No</th>
                <th>Qty</th>
                <th>Unit</th>
                <th>Remarks</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
            <tfoot>
              <tr>
                <td colspan="4" class="text-right strong">Total Qty</td>
                <td id="totalQty">0</td>
                <td colspan="3"></td>
              </tr>
            </tfoot>
          </table>
        </div>

        <div id="unitSubtotal" class="unit-subtotals" aria-live="polite"></div>
      </section>

      <section class="card">
        <label>Remarks</label>
        <textarea id="remarks" rows="3" placeholder="Any remarks..."></textarea>
        <div class="goods-note">Goods are not for sale — only site to site transfer</div>
      </section>

      <!-- Issued (above) & Received (below) as requested -->
      <section class="card group-grid">
        <div class="group">
          <h4>Consignee / Issued by</h4>
          <div class="subgrid">
            <div>
              <label>For Authorised Person — Name</label>
              <input id="issuedName">
              <label>Designation</label>
              <input id="issuedDesig">
            </div>
            <div>
              <label>Outward Register Sr No</label>
              <input id="outwardSr">
            </div>
          </div>
          <div class="sign-row">
            <div class="sign-box"></div>
            <div class="sign-box"></div>
          </div>
        </div>

        <div class="group">
          <h4>Consignor / Received by</h4>
          <div class="subgrid">
            <div>
              <label>For Security — Date (manual)</label>
              <input id="receivedSecurityDate" type="date">
              <label>Inward Register Sr No</label>
              <input id="inwardSr">
            </div>
            <div>
              <label>For Authorised Person — Name</label>
              <input id="receivedName">
              <label>Designation</label>
              <input id="receivedDesig">
            </div>
          </div>
          <div class="sign-row">
            <div class="sign-box"></div>
            <div class="sign-box"></div>
          </div>
        </div>
      </section>

      <!-- Actions -->
      <section class="card actions-row">
        <div class="left">
          <button class="btn" onclick="saveToSheet()">Save to Google Sheet</button>
          <button class="btn muted" onclick="downloadJSON()">Download JSON</button>
          <button class="btn muted" onclick="printMultiCopies()">Print (Office + Security)</button>
        </div>
        <div class="right diagnostics">
          <div id="lastStatus">Last save: —</div>
          <div id="errorLog" class="error-log"></div>
        </div>
      </section>

    </main>

    <footer class="page-footer">
      <small>Generated by GWTPL GatePass v17</small>
    </footer>
  </div>

  <!-- print template container (hidden) -->
  <div id="printHolder" style="display:none"></div>

  <script src="script.js"></script>
</body>
</html>
